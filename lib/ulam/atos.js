"use strict";

Object.defineProperty(exports, "__esModule", {
	value: true
});
exports.atos = atos;

/**
 * Converts a square Ulam spiral index to an array index.
 *
 */

function atos(i, n) {

	var s, l, r, L, R, x, y;

	s = Math.sqrt(i) | 0;
	l = s;
	r = s + 1;
	L = l * l;
	R = r * r;
	x = (n - 1) / 2 | 0;
	y = n / 2 | 0;

	if (s % 2 === 1) {
		if (i < (L + R) / 2 | 0) {
			x += (s / 2 | 0) + 1;
			y += (l / 2 | 0) + L - i;
		} else {
			x -= (r / 2 | 0) - R + i;
			y -= (s / 2 | 0) + 1;
		}
	} else {
		if (i < (L + R) / 2 | 0) {
			x -= s / 2 | 0;
			y -= (l / 2 | 0) + L - i;
		} else {
			x += (r / 2 | 0) + 1 - R + i;
			y += s / 2 | 0;
		}
	}

	return n * y + x;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy91bGFtL2F0b3MuanMiXSwibmFtZXMiOlsiYXRvcyIsImkiLCJuIiwicyIsImwiLCJyIiwiTCIsIlIiLCJ4IiwieSIsIk1hdGgiLCJzcXJ0Il0sIm1hcHBpbmdzIjoiOzs7OztRQU1pQkEsSSxHQUFBQSxJOztBQUxqQjs7Ozs7QUFLUSxTQUFTQSxJQUFULENBQWdCQyxDQUFoQixFQUFvQkMsQ0FBcEIsRUFBd0I7O0FBRS9CLEtBQUlDLENBQUosRUFBT0MsQ0FBUCxFQUFVQyxDQUFWLEVBQWFDLENBQWIsRUFBZ0JDLENBQWhCLEVBQW1CQyxDQUFuQixFQUFzQkMsQ0FBdEI7O0FBRUFOLEtBQUlPLEtBQUtDLElBQUwsQ0FBVVYsQ0FBVixJQUFlLENBQW5CO0FBQ0FHLEtBQUlELENBQUo7QUFDQUUsS0FBSUYsSUFBSSxDQUFSO0FBQ0FHLEtBQUlGLElBQUlBLENBQVI7QUFDQUcsS0FBSUYsSUFBSUEsQ0FBUjtBQUNBRyxLQUFJLENBQUNOLElBQUksQ0FBTCxJQUFVLENBQVYsR0FBYyxDQUFsQjtBQUNBTyxLQUFJUCxJQUFJLENBQUosR0FBUSxDQUFaOztBQUVBLEtBQUlDLElBQUksQ0FBSixLQUFVLENBQWQsRUFBaUI7QUFDaEIsTUFBSUYsSUFBSSxDQUFDSyxJQUFJQyxDQUFMLElBQVUsQ0FBZCxHQUFrQixDQUF0QixFQUF5QjtBQUN4QkMsUUFBSyxDQUFDTCxJQUFJLENBQUosR0FBUSxDQUFULElBQWMsQ0FBbkI7QUFDQU0sUUFBSyxDQUFDTCxJQUFJLENBQUosR0FBUSxDQUFULElBQWNFLENBQWQsR0FBa0JMLENBQXZCO0FBQ0EsR0FIRCxNQUlLO0FBQ0pPLFFBQUssQ0FBQ0gsSUFBSSxDQUFKLEdBQVEsQ0FBVCxJQUFjRSxDQUFkLEdBQWtCTixDQUF2QjtBQUNBUSxRQUFLLENBQUNOLElBQUksQ0FBSixHQUFRLENBQVQsSUFBYyxDQUFuQjtBQUNBO0FBQ0QsRUFURCxNQVVLO0FBQ0osTUFBSUYsSUFBSSxDQUFDSyxJQUFJQyxDQUFMLElBQVUsQ0FBZCxHQUFrQixDQUF0QixFQUF5QjtBQUN4QkMsUUFBTUwsSUFBSSxDQUFKLEdBQVEsQ0FBZDtBQUNBTSxRQUFLLENBQUNMLElBQUksQ0FBSixHQUFRLENBQVQsSUFBY0UsQ0FBZCxHQUFrQkwsQ0FBdkI7QUFDQSxHQUhELE1BSUs7QUFDSk8sUUFBSyxDQUFDSCxJQUFJLENBQUosR0FBUSxDQUFULElBQWMsQ0FBZCxHQUFrQkUsQ0FBbEIsR0FBc0JOLENBQTNCO0FBQ0FRLFFBQU1OLElBQUksQ0FBSixHQUFRLENBQWQ7QUFDQTtBQUNEOztBQUVELFFBQU9ELElBQUlPLENBQUosR0FBUUQsQ0FBZjtBQUNBIiwiZmlsZSI6ImF0b3MuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcbi8qKlxuICogQ29udmVydHMgYSBzcXVhcmUgVWxhbSBzcGlyYWwgaW5kZXggdG8gYW4gYXJyYXkgaW5kZXguXG4gKlxuICovXG5cbiBleHBvcnQgZnVuY3Rpb24gYXRvcyAoIGkgLCBuICkge1xuXG5cdHZhciBzLCBsLCByLCBMLCBSLCB4LCB5O1xuXG5cdHMgPSBNYXRoLnNxcnQoaSkgfCAwO1xuXHRsID0gcztcblx0ciA9IHMgKyAxO1xuXHRMID0gbCAqIGw7XG5cdFIgPSByICogcjtcblx0eCA9IChuIC0gMSkgLyAyIHwgMDtcblx0eSA9IG4gLyAyIHwgMDtcblxuXHRpZiAocyAlIDIgPT09IDEpIHtcblx0XHRpZiAoaSA8IChMICsgUikgLyAyIHwgMCkge1xuXHRcdFx0eCArPSAocyAvIDIgfCAwKSArIDE7XG5cdFx0XHR5ICs9IChsIC8gMiB8IDApICsgTCAtIGk7XG5cdFx0fVxuXHRcdGVsc2Uge1xuXHRcdFx0eCAtPSAociAvIDIgfCAwKSAtIFIgKyBpO1xuXHRcdFx0eSAtPSAocyAvIDIgfCAwKSArIDE7XG5cdFx0fVxuXHR9XG5cdGVsc2Uge1xuXHRcdGlmIChpIDwgKEwgKyBSKSAvIDIgfCAwKSB7XG5cdFx0XHR4IC09IChzIC8gMiB8IDApO1xuXHRcdFx0eSAtPSAobCAvIDIgfCAwKSArIEwgLSBpO1xuXHRcdH1cblx0XHRlbHNlIHtcblx0XHRcdHggKz0gKHIgLyAyIHwgMCkgKyAxIC0gUiArIGk7XG5cdFx0XHR5ICs9IChzIC8gMiB8IDApO1xuXHRcdH1cblx0fVxuXG5cdHJldHVybiBuICogeSArIHg7XG59XG4iXX0=