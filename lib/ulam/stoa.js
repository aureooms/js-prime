"use strict";

Object.defineProperty(exports, "__esModule", {
	value: true
});
exports.stoa = stoa;

/**
 * Converts an array index to a square Ulam spiral index.
 *
 */

function stoa(i, n) {

	var line, col, ring_index, side_col, side_line, sub_size;

	line = i / n | 0;
	col = i % n;

	if (n % 2 === 0) {
		line = n - line - 1;
		col = n - col - 1;
	}

	side_col = 1;
	side_line = 1;

	if (col < n - line) {
		ring_index = Math.min(line, col);
	} else if (col > line) {
		ring_index = n - col - 1;
		side_line = -1;
	} else {
		ring_index = n - line - 1;
		side_col = -1;
	}

	sub_size = n - ring_index * 2;

	return sub_size * sub_size - (sub_size - 1) * 2 + side_line * (line - ring_index) - side_col * (col - ring_index) - 1;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy91bGFtL3N0b2EuanMiXSwibmFtZXMiOlsic3RvYSIsImkiLCJuIiwibGluZSIsImNvbCIsInJpbmdfaW5kZXgiLCJzaWRlX2NvbCIsInNpZGVfbGluZSIsInN1Yl9zaXplIiwiTWF0aCIsIm1pbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7UUFNZ0JBLEksR0FBQUEsSTs7QUFMaEI7Ozs7O0FBS08sU0FBU0EsSUFBVCxDQUFnQkMsQ0FBaEIsRUFBb0JDLENBQXBCLEVBQXdCOztBQUU5QixLQUFJQyxJQUFKLEVBQVVDLEdBQVYsRUFBZUMsVUFBZixFQUEyQkMsUUFBM0IsRUFBcUNDLFNBQXJDLEVBQWdEQyxRQUFoRDs7QUFFQUwsUUFBT0YsSUFBSUMsQ0FBSixHQUFRLENBQWY7QUFDQUUsT0FBTUgsSUFBSUMsQ0FBVjs7QUFFQSxLQUFJQSxJQUFJLENBQUosS0FBVSxDQUFkLEVBQWlCO0FBQ2hCQyxTQUFPRCxJQUFJQyxJQUFKLEdBQVcsQ0FBbEI7QUFDQUMsUUFBTUYsSUFBSUUsR0FBSixHQUFVLENBQWhCO0FBQ0E7O0FBRURFLFlBQVcsQ0FBWDtBQUNBQyxhQUFZLENBQVo7O0FBRUEsS0FBSUgsTUFBTUYsSUFBSUMsSUFBZCxFQUFvQjtBQUNuQkUsZUFBYUksS0FBS0MsR0FBTCxDQUFTUCxJQUFULEVBQWVDLEdBQWYsQ0FBYjtBQUNBLEVBRkQsTUFHSyxJQUFJQSxNQUFNRCxJQUFWLEVBQWdCO0FBQ3BCRSxlQUFhSCxJQUFJRSxHQUFKLEdBQVUsQ0FBdkI7QUFDQUcsY0FBWSxDQUFDLENBQWI7QUFDQSxFQUhJLE1BSUQ7QUFDSEYsZUFBYUgsSUFBSUMsSUFBSixHQUFXLENBQXhCO0FBQ0FHLGFBQVcsQ0FBQyxDQUFaO0FBQ0E7O0FBRURFLFlBQVdOLElBQUlHLGFBQWEsQ0FBNUI7O0FBRUEsUUFBT0csV0FBV0EsUUFBWCxHQUFzQixDQUFDQSxXQUFXLENBQVosSUFBaUIsQ0FBdkMsR0FBMkNELGFBQWFKLE9BQU9FLFVBQXBCLENBQTNDLEdBQTZFQyxZQUFZRixNQUFNQyxVQUFsQixDQUE3RSxHQUE2RyxDQUFwSDtBQUVBIiwiZmlsZSI6InN0b2EuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcbi8qKlxuICogQ29udmVydHMgYW4gYXJyYXkgaW5kZXggdG8gYSBzcXVhcmUgVWxhbSBzcGlyYWwgaW5kZXguXG4gKlxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBzdG9hICggaSAsIG4gKSB7XG5cblx0dmFyIGxpbmUsIGNvbCwgcmluZ19pbmRleCwgc2lkZV9jb2wsIHNpZGVfbGluZSwgc3ViX3NpemU7XG5cblx0bGluZSA9IGkgLyBuIHwgMDtcblx0Y29sID0gaSAlIG47XG5cblx0aWYgKG4gJSAyID09PSAwKSB7XG5cdFx0bGluZSA9IG4gLSBsaW5lIC0gMTtcblx0XHRjb2wgPSBuIC0gY29sIC0gMTtcblx0fVxuXG5cdHNpZGVfY29sID0gMTtcblx0c2lkZV9saW5lID0gMTtcblxuXHRpZiAoY29sIDwgbiAtIGxpbmUpIHtcblx0XHRyaW5nX2luZGV4ID0gTWF0aC5taW4obGluZSwgY29sKTtcblx0fVxuXHRlbHNlIGlmIChjb2wgPiBsaW5lKSB7XG5cdFx0cmluZ19pbmRleCA9IG4gLSBjb2wgLSAxO1xuXHRcdHNpZGVfbGluZSA9IC0xO1xuXHR9XG5cdGVsc2V7XG5cdFx0cmluZ19pbmRleCA9IG4gLSBsaW5lIC0gMTtcblx0XHRzaWRlX2NvbCA9IC0xO1xuXHR9XG5cblx0c3ViX3NpemUgPSBuIC0gcmluZ19pbmRleCAqIDI7XG5cblx0cmV0dXJuIHN1Yl9zaXplICogc3ViX3NpemUgLSAoc3ViX3NpemUgLSAxKSAqIDIgKyBzaWRlX2xpbmUgKiAobGluZSAtIHJpbmdfaW5kZXgpIC0gc2lkZV9jb2wgKiAoY29sIC0gcmluZ19pbmRleCkgLSAxO1xuXG59XG4iXX0=